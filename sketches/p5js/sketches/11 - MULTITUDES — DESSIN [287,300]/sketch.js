// ----------------------------------------------------
let DESSIN = 297;

// ----------------------------------------------------
let NP=480,PI=Math.PI;
let N=5,T;
let DATA = 
[
  [-4,-6, 4,-6, 0,4, -4,-6], [-2,-3, -9,-4], [2,-3, 9,-4],
  [-2,-2, -8,1], [2,-2, 8,1], [-1,2, -4,6, -2,10],
  [1,2, 4,6, 2,10], [0,0, .5,1, 1,0, -1,0, -.5,1, 0,0]
];

if (DESSIN==288) N=20;
else if (DESSIN==289) N=400;
else if (DESSIN==290) N=225;
else if (DESSIN==291) N=150;
else if (DESSIN==292) N=200;
else if (DESSIN==293) N=200;
else if (DESSIN==294) N=100;
else if (DESSIN==295) { N=100; DATA = [[10,10, 10,-10, -10,-10, -10,10, 10,10]] }
else if (DESSIN==296) { N=400; DATA = [[10,10, 10,-10, -10,-10, -10,10, 10,10]] }
else if (DESSIN==297) { N=400; DATA = [[10,10, -10,-10], [0,10, 0,-10], [-10,10, 10,-10], [-10,0, 10,0]] }
else if (DESSIN==298) { N=100; DATA = [[-2,-10, -2,-6, 0,-2, -2,4, -4,0, -4,-4, -4,0, -2,4, 0,4, -2,7,2,7, 0,4, 2,4, 4,0, 4,-4, 4,0, 2,4, 0,-2, 2,-6, 2,-10, 2,-6, 0,-2, -2,-6, -2,-10]] }
else if (DESSIN==299) { N=200; DATA = [[-2,-10, -2,-6, 0,-2, -2,4, -4,0, -4,-4, -4,0, -2,4, 0,4, -2,7,2,7, 0,4, 2,4, 4,0, 4,-4, 4,0, 2,4, 0,-2, 2,-6, 2,-10, 2,-6, 0,-2, -2,-6, -2,-10]] }
else if (DESSIN==300) { N=12*20; DATA = [[-2,-10, -2,-6, 0,-2, -2,4, -4,0, -4,-4, -4,0, -2,4, 0,4, -2,7,2,7, 0,4, 2,4, 4,0, 4,-4, 4,0, 2,4, 0,-2, 2,-6, 2,-10, 2,-6, 0,-2, -2,-6, -2,-10]] }

// ----------------------------------------------------
function setup() 
{
  INIT();
  let X,Y,A,V=0;
  for (let I=1;I<=N;I++)
  {
    if (DESSIN==287)
    {
      T=.3;
      X=(1-T)*(2*RND(1)-1);
      Y=(1-T)*(2*RND(1)-1);
      A=2*PI*RND(1);
    }
    else if (DESSIN==288)
    {
      T=.1;
      X=(1-T)*(2*RND(1)-1);
      Y=(1-T)*(2*RND(1)-1);
      A=2*PI*RND(1);
    }
    else if (DESSIN==289)
    {
      T=.05;
      X=(1-T)*(2*((I-1)%20)/20-1);
      Y=(1-T)*(2*int((I-1)/20)/20-1);
      A=2*PI*(X+Y)/5;
    }
    else if (DESSIN==290)
    {
      T=.055;
      X=(1-T)*(2*((I-1)%15)/15-1)+.05*RND(1);
      Y=(1-T)*(2*int((I-1)/15)/15-1)+.05*RND(1);
      A=2*PI*(X*X+Y)/2;
    }       
    else if (DESSIN==291)
    {
      T=.1*RND(1);
      X=(1-T)*(2*RND(1)-1);
      Y=(1-T)*(2*RND(1)-1);
      A=2*PI*(X+Y)/6;
    }
    else if (DESSIN==292)
    {
      let R=1-I/200;
      let W=7*I/20;
      T=R/15;
      X=R*cos(W);
      Y=R*sin(W);
      A=W;
    }
    else if (DESSIN==293)
    {
      let R=1-I/200;
      let W=2*PI*I/40+.1;
      T=R/10;
      X=R*cos(W);
      Y=R*sin(W);
      A=W;
    }
    else if (DESSIN==294)
    {
      let W=2*PI*I/100+.1;
      T=.1;
      X=.8*cos(W);
      Y=.8*sin(2*W);
      A=W;
    }
    else if (DESSIN==295)
    {
      T=.1;
      X=(1-2*T)*(2*((I-1)%10)/9-1);
      Y=(1-T)*(2*int((I-1)/10)/9-1);
      A=PI*(X*X+Y*Y);
    }
    else if (DESSIN==296)
    {
      T=.05;
      X=(1-2*T)*(2*((I-1)%20)/19-1);
      Y=(1-T)*(2*int((I-1)/20)/19-1);
      A=PI*(X*X+Y*Y);
    }
    else if (DESSIN==297)
    {
      T=.1;
      X=(1-2*T)*(2*((I-1)%20)/19-1);
      Y=-(1-T)*(2*int((I-1)/20)/19-1);
      A=0;
      V=X*X+Y*Y;
    }
    else if (DESSIN==298)
    {
      T=.15*(1+(2*RND(1)-1)/3);
      X=(1-2*T)*(2*RND(1)-1);
      Y=(1-2*T)*(2*RND(1)-1);
      T=T*(1-(Y/2+.5))
      A=PI/20*(2*RND(1)-1);
      V=.1;

    }
    else if (DESSIN==299)
    {
      T=.08*(1+(2*RND(1)-1)/3);
      let W=2*PI*I/N*10, R=1-I/N;
      X=R*cos(W);
      Y=R*sin(W);
      A=PI/50*(2*RND(1)-1);
      V=.1;
    }     
    else if (DESSIN==300)
    {
      T=.07*(1+(2*RND(1)-1)/3);
      X=(1-2*T)*(2*((I-1)%20)/19-1);
      Y=-(1-2*T)*(2*int((I-1)/12)/11-1);
      A=PI/20*(2*RND(1)-1);
      V=.05;
    }     
    DESSINE_DATA(T,X,Y,A,V);
  }
  
  TRACE2();
}

// ----------------------------------------------------
function DESSINE_DATA(T,X,Y,A,V)
{
  let CO=cos(A),SI=sin(A);
  for (let I=0;I<DATA.length;I++)
  {
    for (let J=0;J<DATA[I].length;J+=2)
    {
        let E=DATA[I][J];   
        let F=DATA[I][J+1];
        E=E/10;F=F/10;
        let X1=(E+V*(RND(1)*2-1))*T; 
        let Y1=(F+V*(RND(1)*2-1))*T; 
        let X2=X1*CO-Y1*SI+X;
        let Y2=X1*SI+Y1*CO+Y;
        let X_=int(NP/2*(X2+1));
        let Y_=int(NP/2*(Y2+1));
        if (J==0) LPRINT(`M${X_},${Y_}`);
        if (J>0) LPRINT(`D${X_},${Y_}`);
    }
        
  }
}
